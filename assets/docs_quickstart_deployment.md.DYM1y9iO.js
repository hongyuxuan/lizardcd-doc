import{_ as s,c as i,o as a,a3 as e,a5 as l,a6 as n}from"./chunks/framework.CVQlUOPj.js";const C=JSON.parse('{"title":"快速部署Lizardcd","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"docs/quickstart/deployment.md","filePath":"docs/quickstart/deployment.md","lastUpdated":1720431440000}'),t={name:"docs/quickstart/deployment.md"},h=e(`<h1 id="快速部署lizardcd" tabindex="-1">快速部署Lizardcd <a class="header-anchor" href="#快速部署lizardcd" aria-label="Permalink to &quot;快速部署Lizardcd&quot;">​</a></h1><p>本章节将向您展示如何将 Lizardcd 快速部署于一个 Kubernetes 集群中。</p><h2 id="前提条件" tabindex="-1">前提条件 <a class="header-anchor" href="#前提条件" aria-label="Permalink to &quot;前提条件&quot;">​</a></h2><ul><li>Kubernetes &gt;= 1.19</li><li>Helm &gt;= 3.8</li></ul><h2 id="使用helm安装" tabindex="-1">使用Helm安装 <a class="header-anchor" href="#使用helm安装" aria-label="Permalink to &quot;使用Helm安装&quot;">​</a></h2><p>可 <a href="https://artifacthub.io/packages/helm/lizardcd/lizardcd" target="_blank" rel="noreferrer">在此</a> 查看最新的 Helm Charts 安装包。</p><p>添加仓库：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lizardcd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://funnyfpf.github.io/lizardcd/</span></span></code></pre></div><p>安装chart：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-lizardcd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lizardcd/lizardcd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2.0.3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span></span></code></pre></div><p>注意，默认 charts 并不会创建 <code>Ingress</code>，您可以编辑 <code>values.yaml</code> ，将 <code>Ingress</code> 打开，并填入您的域名：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ingress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    hostname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lizardcd-server.local</span></span></code></pre></div><p>然后使用 <code>upgrade</code> 命令更新：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-lizardcd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> values.yaml</span></span></code></pre></div><p>以上操作将在您的 Kubernetes 集群的 default 命名空间下安装 <code>etcd</code>、<code>lizardcd-server</code>、<code>lizardcd-agent</code>、<code>lizardcd-ui</code> 四个工作负载，并且配置好了 <code>Service</code>、<code>Ingress</code>、<code>ServiceAccount</code>、<code>ConfigMap</code> 等资源。</p><p>输入以下命令检查安装是否成功：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># kubectl get pods</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                           READY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   STATUS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      RESTARTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       AGE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">my-lizardcd-etcd-0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                             1/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              61m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">my-lizardcd-etcd-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                             1/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              61m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">my-lizardcd-etcd-2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                             1/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              61m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">my-lizardcd-lizardcd-agent-5fc88cffcd-qcsxj</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    1/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              3m3s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">my-lizardcd-lizardcd-initjob-lhdfx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">             0/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Completed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              6s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">my-lizardcd-lizardcd-server-5f89dfc699-bb6wh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   1/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              61m</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">my-lizardcd-lizardcd-ui-6966cfc964-n87bb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       2/2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (18m </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ago</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)   61m</span></span></code></pre></div><h2 id="访问lizardcd" tabindex="-1">访问Lizardcd <a class="header-anchor" href="#访问lizardcd" aria-label="Permalink to &quot;访问Lizardcd&quot;">​</a></h2><p>打开浏览器，输入您配置的 Ingress 域名（您可能需要手动设置 hosts）</p><p><a href="http://lizardcd-server.local" target="_blank" rel="noreferrer">http://lizardcd-server.local</a></p><p>如果能看到如下页面，则说明安装成功。否则，请检查您的工作负载 <code>lizardcd-server</code> 的日志是否有报错。</p><p><img src="`+l+'" alt="" data-fancybox="gallery"></p><p>在您的 Kubernetes 任务页面找到 <code>lizardcd-lizardcd-initjob</code>，查看该任务的日志输出，找到初始化的 <code>admin</code> 用户密码并记住此密码。</p><p>回到 Lizardcd 页面，用 <code>admin</code> 用户密码登录，您应该能看到如下页面：</p><p><img src="'+n+'" alt="" data-fancybox="gallery"></p>',25),p=[h];function d(k,r,c,F,o,g){return a(),i("div",null,p)}const E=s(t,[["render",d]]);export{C as __pageData,E as default};
